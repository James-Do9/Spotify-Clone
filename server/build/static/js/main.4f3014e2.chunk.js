(this["webpackJsonpspotify-clone"]=this["webpackJsonpspotify-clone"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(29),l=a.n(r),i=(a(45),a.p+"static/media/audio-player.34d30d07.svg"),s=a.p+"static/media/ariana-grande-positions.32a226be.png",o=a.p+"static/media/bad-bunny.a524743c.png",m=a.p+"static/media/billie-eilish.ffab625d.png",u=a.p+"static/media/bts-mos.636fecde.png",d=a.p+"static/media/dua-lipa-FN.a537c49f.png",f=a.p+"static/media/harry-styles-fl.0e1f10d8.png",p=a.p+"static/media/juice-wrld-lnd.49a147e4.png",E=a.p+"static/media/post-malone-hb.c17f5224.png",h=a.p+"static/media/the-weeknd-ah.e7b180a7.png",g="https://accounts.spotify.com/authorize?client_id=3c3f72516c2c4823b6e892334f706b8b&response_type=code&redirect_uri=http://localhost:3000&scope=streaming%20user-read-email%20user-read-private%20user-library-read%20user-library-modify%20user-read-playback-state%20user-modify-playback-state";function v(){return c.a.createElement("div",null,c.a.createElement("section",{className:"login desktop",style:{minHeight:"100vh"}},c.a.createElement("div",{className:"row container login-card mt-5"},c.a.createElement("div",{className:"col-4 text-center"},c.a.createElement("div",{className:"login-msg"},c.a.createElement("h1",null,"Login with Spotify"),c.a.createElement("p",null,"Play your favorite songs on demand."),c.a.createElement("p",null,"Pick from the top albums!"),c.a.createElement("div",null,c.a.createElement("div",{className:"audio-img"},c.a.createElement("img",{src:i})),c.a.createElement("a",{className:"login-button mt-5",href:g},"Login with Spotify")))),c.a.createElement("div",{className:"col-8"},c.a.createElement("div",{className:"row container"},c.a.createElement("div",{className:"col"},c.a.createElement("img",{src:s}),c.a.createElement("img",{src:o}),c.a.createElement("img",{src:d}))),c.a.createElement("div",{className:"row container"},c.a.createElement("div",{className:"col"},c.a.createElement("img",{src:u}),c.a.createElement("img",{src:h}),c.a.createElement("img",{src:f}))),c.a.createElement("div",{className:"row container"},c.a.createElement("div",{className:"col"},c.a.createElement("img",{src:p}),c.a.createElement("img",{src:E}),c.a.createElement("img",{src:m})))))),c.a.createElement("section",{className:"login mobile",style:{minHeight:"100vh"}},c.a.createElement("div",{className:"row container login-card mt-5"},c.a.createElement("div",{className:"col text-center"},c.a.createElement("div",{className:"login-msg"},c.a.createElement("h1",null,"Login with Spotify"),c.a.createElement("p",null,"Play your favorite songs on demand."),c.a.createElement("p",null,"Pick from the top albums!"),c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("img",{src:i})),c.a.createElement("a",{className:"login-button mt-5",href:g},"Login with Spotify")))))))}var b=a(5),y=a(6),w=a.n(y);var N=a(105),k=a(30),j=a.n(k);function O(e){var t=e.track,a=e.chooseTrack;return c.a.createElement("div",{className:"d-flex m-2 align-items-center",style:{cursor:"pointer"},onClick:function(){a(t)}},c.a.createElement("img",{src:t.albumUrl,style:{height:"64px",width:"64px"}}),c.a.createElement("div",{className:"ml-3"},c.a.createElement("div",null,t.title),c.a.createElement("div",{className:"text-muted"},t.artist)))}var S=a(39);function x(e){var t=e.accessToken,a=e.trackUri,r=Object(n.useState)(!1),l=Object(b.a)(r,2),i=l[0],s=l[1];return Object(n.useEffect)((function(){return s(!0)}),[a]),t?c.a.createElement(S.a,{token:t,showSaveIcon:!0,callback:function(e){e.isPlaying||s(!1)},play:i,uris:a?[a]:[]}):null}var T=new j.a({clientId:"3c3f72516c2c4823b6e892334f706b8b"});function I(e){var t=function(e){var t=Object(n.useState)(),a=Object(b.a)(t,2),c=a[0],r=a[1],l=Object(n.useState)(),i=Object(b.a)(l,2),s=i[0],o=i[1],m=Object(n.useState)(),u=Object(b.a)(m,2),d=u[0],f=u[1];return Object(n.useEffect)((function(){w.a.post("http://localhost:3001/login",{code:e}).then((function(e){r(e.data.accessToken),o(e.data.refreshToken),f(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),[e]),Object(n.useEffect)((function(){if(s&&d){var e=setInterval((function(){w.a.post("http://localhost:3001/refresh",{refreshToken:s}).then((function(e){r(e.data.accessToken),f(e.data.expiresIn),window.history.pushState({},null,"/")})).catch((function(){window.location="/"}))}),1e3*(d-60));return function(){return clearInterval(e)}}}),[s,d]),c}(e.code),a=Object(n.useState)(""),r=Object(b.a)(a,2),l=r[0],i=r[1],s=Object(n.useState)([]),o=Object(b.a)(s,2),m=o[0],u=o[1],d=Object(n.useState)(),f=Object(b.a)(d,2),p=f[0],E=f[1],h=Object(n.useState)(""),g=Object(b.a)(h,2),v=g[0],y=g[1];function k(e){E(e),i(""),y("")}return Object(n.useEffect)((function(){p&&w.a.get("http://localhost:3001/lyrics",{params:{track:p.title,artist:p.artist}}).then((function(e){y(e.data.lyrics)}))}),[p]),Object(n.useEffect)((function(){t&&T.setAccessToken(t)}),[t]),Object(n.useEffect)((function(){if(!l)return u([]);if(t){var e=!1;return T.searchTracks(l).then((function(t){e||u(t.body.tracks.items.map((function(e){var t=e.album.images.reduce((function(e,t){return t.height<e.height?t:e}),e.album.images[0]);return{artist:e.artists[0].name,title:e.name,uri:e.uri,albumUrl:t.url}})))})),function(){return e=!0}}}),[l,t]),c.a.createElement("div",{className:"dashboard"},c.a.createElement("div",{className:"container d-flex flex-column py-2",style:{height:"90vh"}},c.a.createElement(N.a.Control,{className:"mt-2",type:"search",placeholder:"Search Songs/Artists",value:l,onChange:function(e){return i(e.target.value)}}),c.a.createElement("div",{className:"flex-grow-1 my-2 scroll"},m.map((function(e){return c.a.createElement(O,{track:e,key:e.uri,chooseTrack:k})})),0===m.length&&c.a.createElement("div",{className:"text-center mt-5",style:{whiteSpace:"pre-line"}},v)),c.a.createElement("div",{className:"player mb-3"},c.a.createElement(x,{accessToken:t,trackUri:null===p||void 0===p?void 0:p.uri}))))}var P=new URLSearchParams(window.location.search).get("code");var L=function(){return P?c.a.createElement(I,{code:P}):c.a.createElement(v,null)},U=a.p+"static/media/spotify.f3214d04.png";function C(){return c.a.createElement("div",{class:"w-100"},c.a.createElement("nav",{class:"navbar navbar-expand-lg"},c.a.createElement("a",{class:"navbar-brand",href:"#"},c.a.createElement("div",{className:"logo"},c.a.createElement("img",{className:"spotify-icon",src:U}),c.a.createElement("span",null,"Spotify Clone")))))}a(102);l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(C,null),c.a.createElement(L,null)),document.getElementById("root"))},81:function(e,t){}},[[103,1,2]]]);
//# sourceMappingURL=main.4f3014e2.chunk.js.map